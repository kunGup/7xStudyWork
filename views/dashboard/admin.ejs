<!-- Button trigger modal -->
<div class="container p-3">
  <button
    type="button"
    class="btn btn-primary btn-sm"
    data-toggle="modal"
    data-target="#newUser"
  >
    Create new user
  </button>
</div>

<div class="container">
  <h3>All Batches</h3>
  <table class="table">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Faculty</th>
        <th scope="col">Class</th>
        <th scope="col">Timings</th>
        <th scope="col">Join</th>
      </tr>
    </thead>
    <tbody>
      <% classes.forEach(course => { %>
      <tr>
        <td><%= course.title %></td>
        <td><%= course.teacher.username %></td>
        <td><%= course.class %></td>
        <td><%= course.timing %></td>
        <td>
          <button
            type="button"
            class="btn btn-success btn-sm join"
            data-join="<%= course.id %>"
          >
            Observe Class
          </button>
          OR
          <a href="<%= course.joinUrl %>" target="_blank">Try this</a>
        </td>
      </tr>
      <% }) %>
    </tbody>
  </table>
</div>

<!-- Modal -->
<div
  class="modal fade"
  id="newUser"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">New user</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="myForm" action="/user/register" method="post" novalidate>
          <div class="form-group">
            <input
              type="text"
              name="username"
              class="form-control my-input"
              placeholder="Username"
              required
            />
          </div>
          <div class="form-group">
            <input
              type="email"
              name="email"
              class="form-control my-input"
              placeholder="Email"
              required
            />
          </div>

          <div class="form-group">
            <input
              type="password"
              name="password"
              class="form-control my-input"
              placeholder="Password"
              required
            />
          </div>
          <div class="form-group" id="A">
            <input
              type="text"
              name="apikey"
              class="form-control my-input"
              placeholder="Api Key"
              required
            />
          </div>
          <div class="form-group" id="B">
            <input
              type="password"
              name="apisecret"
              class="form-control my-input"
              placeholder="Api Secret"
              required
            />
          </div>
          <div class="form-group" id="C">
            <label for="select-class">Select Class</label>
            <select class="form-control" name="standard">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
              <option>6</option>
              <option>7</option>
              <option>8</option>
              <option>9</option>
              <option>10</option>
              <option>11</option>
              <option>12</option>
            </select>
          </div>
          Assign Role:
          <br />
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="role"
              id="student"
              value="student"
              onchange="hideAB(this)"
              checked
            />
            <label class="form-check-label" for="student">Student</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="role"
              id="teacher"
              value="teacher"
              onchange="hideC(this)"
            />
            <label class="form-check-label" for="teacher">Teacher</label>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Close
        </button>
        <button type="button" class="btn btn-primary" id="newUser_btn">
          Create
        </button>
      </div>
    </div>
  </div>
</div>
<script>
  const btn = document.getElementById("newUser_btn");
  const form = document.getElementById("myForm");
  btn.addEventListener("click", () => {
    form.submit();
  });
  function hideAB(x) {
    if (x.checked) {
      document.getElementById("A").style.display = "none";
      document.getElementById("B").style.display = "none";
      document.getElementById("C").style.display = "initial";
    }
  }

  function hideC(x) {
    if (x.checked) {
      document.getElementById("B").style.display = "initial";
      document.getElementById("A").style.display = "initial";
      document.getElementById("C").style.display = "none";
    }
  }
  hideAB(document.getElementById("student"));
</script>
